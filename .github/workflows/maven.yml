# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#   BusinessCore â€” ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ±Ğ¾Ñ€ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· GitHub Actions
#
#   Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸:
#     - push Ğ² Ğ²ĞµÑ‚ĞºÑƒ main
#     - ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ Pull Request Ğ² main
#     - Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¼ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ (workflow_dispatch)
#
#   Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ JAR-Ñ„Ğ°Ğ¹Ğ» Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ "Artifacts"
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

name: "ğŸ”¨ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° BusinessCore"

# â”€â”€â”€ ĞšĞ¾Ğ³Ğ´Ğ° Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ‚ÑŒ â”€â”€â”€
on:
  push:
    branches:
      - main
      - master
      - dev
  pull_request:
    branches:
      - main
      - master
  # ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ² GitHub
  workflow_dispatch:

# â”€â”€â”€ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ ÑĞ±Ğ¾Ñ€ĞºĞ¸ â”€â”€â”€
jobs:
  build:
    name: "ğŸ“¦ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ğ°"
    runs-on: ubuntu-latest

    steps:
      # â”€â”€ Ğ¨Ğ°Ğ³ 1: Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ ĞºĞ¾Ğ´ Ğ¸Ğ· Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ â”€â”€
      - name: "ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°"
        uses: actions/checkout@v4

      # â”€â”€ Ğ¨Ğ°Ğ³ 2: Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Java 21 â”€â”€
      - name: "â˜• Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Java 21 (Temurin)"
        uses: actions/setup-java@v4
        with:
          java-version: '21'
          distribution: 'temurin'
          cache: 'maven'   # ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ Maven

      # â”€â”€ Ğ¨Ğ°Ğ³ 3: Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ â”€â”€
      - name: "ğŸ”§ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Maven (mvn clean package)"
        run: mvn clean package --no-transfer-progress

      # â”€â”€ Ğ¨Ğ°Ğ³ 4: Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ JAR â”€â”€
      - name: "ğŸ“¤ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ğ° (JAR-Ñ„Ğ°Ğ¹Ğ»)"
        uses: actions/upload-artifact@v4
        with:
          name: BusinessCore-JAR
          path: target/BusinessCore-*.jar
          retention-days: 30   # Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ 30 Ğ´Ğ½ĞµĞ¹

      # â”€â”€ Ğ¨Ğ°Ğ³ 5: ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑĞ±Ğ¾Ñ€ĞºĞµ â”€â”€
      - name: "â„¹ï¸ Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑĞ±Ğ¾Ñ€ĞºĞµ"
        run: |
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "  âœ… Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
          echo "ğŸ“ Ğ¤Ğ°Ğ¹Ğ»:"
          ls -lh target/BusinessCore-*.jar
          echo ""
          echo "ğŸ“‹ Ğ’ĞµÑ€ÑĞ¸Ñ Java:"
          java -version
          echo ""
          echo "ğŸ“‹ Ğ’ĞµÑ€ÑĞ¸Ñ Maven:"
          mvn -version
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

  # â”€â”€â”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ»Ğ¸Ğ·Ğ° (Ğ¿Ñ€Ğ¸ Ğ¿ÑƒÑˆĞµ Ñ‚ĞµĞ³Ğ°) â”€â”€â”€
  release:
    name: "ğŸš€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ»Ğ¸Ğ·Ğ°"
    runs-on: ubuntu-latest
    needs: build
    if: startsWith(github.ref, 'refs/tags/v')

    steps:
      - name: "ğŸ“¥ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°"
        uses: actions/checkout@v4

      - name: "â˜• Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Java 21"
        uses: actions/setup-java@v4
        with:
          java-version: '21'
          distribution: 'temurin'
          cache: 'maven'

      - name: "ğŸ”§ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°"
        run: mvn clean package --no-transfer-progress

      - name: "ğŸš€ ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ñ€ĞµĞ»Ğ¸Ğ·Ğ°"
        uses: softprops/action-gh-release@v2
        with:
          files: target/BusinessCore-*.jar
          body: |
            ## ğŸ“¦ BusinessCore ${{ github.ref_name }}

            ### Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°:
            1. Ğ¡ĞºĞ°Ñ‡Ğ°Ğ¹Ñ‚Ğµ `BusinessCore-1.0.0.jar`
            2. ĞŸĞ¾Ğ¼ĞµÑÑ‚Ğ¸Ñ‚Ğµ Ğ² Ğ¿Ğ°Ğ¿ĞºÑƒ `plugins/`
            3. ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ ÑĞµÑ€Ğ²ĞµÑ€

            ### Ğ¢Ñ€ĞµĞ±ÑƒĞµĞ¼Ñ‹Ğµ Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ñ‹:
            - **LuckPerms** (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)
            - **DeluxeMenus** (Ğ´Ğ»Ñ Ğ¼ĞµĞ½Ñ)
            - **PlaceholderAPI** (Ğ´Ğ»Ñ Ğ¿Ğ»ĞµĞ¹ÑÑ…Ğ¾Ğ»Ğ´ĞµÑ€Ğ¾Ğ²)
            - **TAB** (Ğ´Ğ»Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ¾Ğ²)
            - **SkinsRestorer** (Ğ´Ğ»Ñ ÑĞºĞ¸Ğ½Ğ¾Ğ²)
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
